@import "tailwindcss";
@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- Global background - ensure white in light mode --- */
html:not(.dark) {
    background-color: white !important;
}

html:not(.dark) body {
    background-color: white !important;
}

html:not(.dark) #root {
    background-color: white !important;
}

/* Force white background on all elements in light mode (override bg-slate-900 without dark:) */
html:not(.dark) [class*="bg-slate-900"],
html:not(.dark) [class*="bg-slate-950"] {
    background-color: white !important;
}

html:not(.dark) [class*="bg-slate-800"] {
    background-color: #f9fafb !important;
    /* gray-50 */
}

/* ===== LIGHT MODE: Force dark text on light backgrounds ===== */
html:not(.dark) .text-white:not(.bg-blue-600):not(.bg-emerald-600):not(.bg-amber-600):not(.bg-red-600):not(.bg-purple-600):not(.bg-indigo-600):not(.bg-primary):not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-red"]):not([class*="bg-yellow"]):not([class*="bg-purple"]) {
    color: #111827 !important;
    /* gray-900 */
}

html:not(.dark) [class*="text-slate-300"]:not([class*="dark:text-slate-300"]) {
    color: #374151 !important;
    /* gray-700 */
}

html:not(.dark) [class*="text-slate-400"]:not([class*="dark:text-slate-400"]) {
    color: #4b5563 !important;
    /* gray-600 */
}

html:not(.dark) [class*="text-slate-500"]:not([class*="dark:text-slate-500"]) {
    color: #6b7280 !important;
    /* gray-500 */
}

html:not(.dark) [class*="text-slate-200"]:not([class*="dark:text-slate-200"]) {
    color: #111827 !important;
    /* gray-900 */
}

html:not(.dark) [class*="text-slate-100"]:not([class*="dark:text-slate-100"]) {
    color: #111827 !important;
    /* gray-900 */
}

/* Force dark text on elements with light backgrounds in light mode */
html:not(.dark) [class*="bg-white"] [class*="text-white"],
html:not(.dark) [class*="bg-gray-50"] [class*="text-white"],
html:not(.dark) [class*="bg-gray-100"] [class*="text-white"],
html:not(.dark) [class*="bg-slate-50"] [class*="text-white"] {
    color: #111827 !important;
    /* gray-900 */
}

/* ===== DARK MODE: Force white/light text on dark backgrounds ===== */
html.dark [class*="bg-slate-900"] [class*="text-gray-900"],
html.dark [class*="bg-slate-950"] [class*="text-gray-900"],
html.dark [class*="bg-slate-800"] [class*="text-gray-900"],
html.dark [class*="bg-slate-700"] [class*="text-gray-900"] {
    color: #f1f5f9 !important;
    /* slate-100 */
}

html.dark [class*="bg-slate-900"] [class*="text-gray-800"],
html.dark [class*="bg-slate-950"] [class*="text-gray-800"],
html.dark [class*="bg-slate-800"] [class*="text-gray-800"] {
    color: #e2e8f0 !important;
    /* slate-200 */
}

html.dark [class*="bg-slate-900"] [class*="text-gray-700"],
html.dark [class*="bg-slate-950"] [class*="text-gray-700"],
html.dark [class*="bg-slate-800"] [class*="text-gray-700"] {
    color: #cbd5e1 !important;
    /* slate-300 */
}

html.dark [class*="bg-slate-900"] [class*="text-gray-600"],
html.dark [class*="bg-slate-950"] [class*="text-gray-600"],
html.dark [class*="bg-slate-800"] [class*="text-gray-600"] {
    color: #94a3b8 !important;
    /* slate-400 */
}

/* Ensure text-white works on dark backgrounds in dark mode */
html.dark [class*="bg-slate-900"] .text-white,
html.dark [class*="bg-slate-950"] .text-white,
html.dark [class*="bg-slate-800"] .text-white,
html.dark [class*="bg-slate-700"] .text-white {
    color: #ffffff !important;
}

/* Ensure text-slate-X works correctly in dark mode */
html.dark [class*="bg-slate-900"] [class*="text-slate-400"],
html.dark [class*="bg-slate-950"] [class*="text-slate-400"],
html.dark [class*="bg-slate-800"] [class*="text-slate-400"] {
    color: #94a3b8 !important;
    /* slate-400 */
}

html.dark [class*="bg-slate-900"] [class*="text-slate-300"],
html.dark [class*="bg-slate-950"] [class*="text-slate-300"],
html.dark [class*="bg-slate-800"] [class*="text-slate-300"] {
    color: #cbd5e1 !important;
    /* slate-300 */
}

html.dark {
    background-color: #020617 !important;
    /* slate-950 */
}

html.dark body {
    background-color: #020617 !important;
    /* slate-950 */
}

html.dark #root {
    background-color: #020617 !important;
    /* slate-950 */
}

/* Force dark backgrounds in dark mode */
html.dark [class*="bg-slate-900"],
html.dark [class*="bg-slate-950"] {
    background-color: #020617 !important;
    /* slate-950 */
}

html.dark [class*="bg-slate-800"] {
    background-color: #0f172a !important;
    /* slate-900 */
}

/* --- Tenant branding (ConfigContext sets --primary-color) --- */
:root {
    --primary-color: #2563eb;
}

@layer utilities {
    .bg-primary {
        background-color: var(--primary-color);
    }

    .text-primary {
        color: var(--primary-color);
    }

    .border-primary {
        border-color: var(--primary-color);
    }
}

/* --- RTL Support --- */
.rtl {
    direction: rtl;
}

.rtl .rbc-day-bg+.rbc-day-bg {
    @apply border-r border-l-0;
}

.rtl .rbc-day-bg {
    @apply border-r border-l-0;
}

.rtl .rbc-time-header-content {
    @apply border-r border-l-0;
}

/* --- Calendar Dark Mode Overrides (Tailwind Style) --- */

@layer components {

    /* Global text color */
    .rbc-calendar {
        @apply dark:text-slate-300 text-gray-700 font-sans;
    }

    /* Off-range background */
    .rbc-off-range-bg {
        @apply dark:bg-slate-900 bg-gray-50;
    }

    /* Header (days/hours) */
    .rbc-header {
        @apply border-b dark:border-slate-700 border-gray-200 p-3 font-bold dark:text-slate-200 text-gray-800;
    }

    /* View background */
    .rbc-month-view,
    .rbc-time-view,
    .rbc-agenda-view {
        @apply border dark:border-slate-700 border-gray-200 dark:bg-slate-900 bg-white;
    }

    /* Day separators */
    .rbc-day-bg+.rbc-day-bg {
        @apply border-l dark:border-slate-700 border-gray-200;
    }

    /* Row separators */
    .rbc-month-row+.rbc-month-row {
        @apply border-t dark:border-slate-700 border-gray-200;
    }

    .rbc-day-bg {
        @apply border-l dark:border-slate-700 border-gray-200;
    }

    /* Today highlight */
    .rbc-today {
        @apply dark:bg-blue-500/10 bg-blue-100;
    }

    /* Event style */
    .rbc-event {
        @apply bg-blue-600 rounded-md border-none shadow-sm;
    }

    /* Event text */
    .rbc-event-content {
        @apply text-xs font-bold;
    }

    /* Toolbar buttons (Today, Back, Next) */
    .rbc-toolbar button {
        @apply dark:text-white text-gray-900 border dark:border-slate-700 border-gray-300 rounded-lg mx-1 transition-colors;
    }

    .rbc-toolbar button:hover {
        @apply dark:bg-slate-800 bg-gray-100;
    }

    .rbc-toolbar button.rbc-active {
        @apply bg-blue-600 border-blue-600 shadow-lg text-white;
    }

    /* Week/day headers */
    .rbc-time-header-content {
        @apply border-l dark:border-slate-700 border-gray-200;
    }

    .rbc-time-content {
        @apply border-t dark:border-slate-700 border-gray-200;
    }

    .rbc-timeslot-group {
        @apply border-b dark:border-slate-700 border-gray-200;
    }

    .rbc-time-view .rbc-row {
        @apply border-b dark:border-slate-700 border-gray-200;
    }

    /* Time gutter text */
    .rbc-time-gutter .rbc-timeslot-group {
        @apply dark:border-slate-700 border-gray-200 dark:text-slate-500 text-gray-600 text-xs;
    }

    /* Toolbar label */
    .rbc-toolbar-label {
        @apply text-xl font-bold dark:text-white text-gray-900 mb-2;
    }
}

/* Force dark text in Calendar in light mode */
html:not(.dark) .rbc-calendar,
html:not(.dark) .rbc-calendar * {
    color: #111827 !important;
    /* gray-900 */
}

html:not(.dark) .rbc-event-content {
    color: white !important;
    /* Events should have white text on colored background */
}

html:not(.dark) .rbc-toolbar button.rbc-active {
    color: white !important;
    /* Active button should have white text */
}

/* ===== RTL Support for Tables ===== */
table[dir="rtl"] {
    direction: rtl;
}

table[dir="rtl"] th,
table[dir="rtl"] td {
    text-align: right;
}

table[dir="rtl"] th.text-center,
table[dir="rtl"] td.text-center {
    text-align: center;
}

table[dir="ltr"] {
    direction: ltr;
}

table[dir="ltr"] th,
table[dir="ltr"] td {
    text-align: left;
}

table[dir="ltr"] th.text-center,
table[dir="ltr"] td.text-center {
    text-align: center;
}

/* ===== Global text color transitions for better UX ===== */
* {
    transition: color 0.2s ease-in-out, background-color 0.2s ease-in-out;
}

/* ===== Additional text color fixes for common patterns ===== */
/* Light mode: dark text on light backgrounds */
html:not(.dark) h1,
html:not(.dark) h2,
html:not(.dark) h3,
html:not(.dark) h4,
html:not(.dark) h5,
html:not(.dark) h6 {
    color: #111827 !important;
    /* gray-900 */
}

html:not(.dark) p,
html:not(.dark) span,
html:not(.dark) div {
    color: inherit;
    /* Inherit from parent, but will be overridden by specific classes */
}

/* Dark mode: light text on dark backgrounds */
html.dark h1,
html.dark h2,
html.dark h3,
html.dark h4,
html.dark h5,
html.dark h6 {
    color: #f1f5f9 !important;
    /* slate-100 */
}

/* Ensure buttons with colored backgrounds keep white text */
html:not(.dark) .bg-blue-600 .text-white,
html:not(.dark) .bg-emerald-600 .text-white,
html:not(.dark) .bg-amber-600 .text-white,
html:not(.dark) .bg-red-600 .text-white,
html:not(.dark) .bg-purple-600 .text-white,
html:not(.dark) .bg-indigo-600 .text-white,
html:not(.dark) [class*="bg-blue"] .text-white,
html:not(.dark) [class*="bg-green"] .text-white,
html:not(.dark) [class*="bg-red"] .text-white,
html:not(.dark) [class*="bg-yellow"] .text-white,
html:not(.dark) [class*="bg-purple"] .text-white {
    color: #ffffff !important;
}

html.dark .bg-blue-600 .text-white,
html.dark .bg-emerald-600 .text-white,
html.dark .bg-amber-600 .text-white,
html.dark .bg-red-600 .text-white,
html.dark .bg-purple-600 .text-white,
html.dark .bg-indigo-600 .text-white {
    color: #ffffff !important;
}